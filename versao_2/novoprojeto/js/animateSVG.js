
const el = document.querySelector('.mensagem-sucesso');

/* SHAPES ------------------------------ */

class Cart extends mojs.CustomShape {
    getShape() {
        return '<g><path d="M22.5,78.75 C19.3949995,78.75 16.875,81.2700033 16.875,84.375 C16.875,87.4799965 19.3949995,90 22.5,90 C25.6050002,90 28.125,87.4799965 28.125,84.375 C28.125,81.2700033 25.6050002,78.75 22.5,78.75 L22.5,78.75 Z M22.5,86.25 C21.4661728,86.25 20.625,85.4088305 20.625,84.375 C20.625,83.3411693 21.4661728,82.5 22.5,82.5 C23.533827,82.5 24.375,83.3411693 24.375,84.375 C24.375,85.4088305 23.533827,86.25 22.5,86.25 L22.5,86.25 Z"></path><path d="M75.1171875,78.75 C72.0121908,78.75 69.4921875,81.2700033 69.4921875,84.375 C69.4921875,87.4799965 72.0121908,90 75.1171875,90 C78.222184,90 80.7421875,87.4799965 80.7421875,84.375 C80.7421875,81.2700033 78.222184,78.75 75.1171875,78.75 L75.1171875,78.75 Z M75.1171875,86.25 C74.0833568,86.25 73.2421875,85.4088305 73.2421875,84.375 C73.2421875,83.3411693 74.0833568,82.5 75.1171875,82.5 C76.151018,82.5 76.9921875,83.3411693 76.9921875,84.375 C76.9921875,85.4088305 76.151018,86.25 75.1171875,86.25 L75.1171875,86.25 Z"></path><path d="M90,15 L13.8696096,7.41703212 C13.4880476,5.78296959 12.8456245,3.98109553 11.0950791,2.57320404 C8.91210961,0.817734 5.38640677,0 0,0 L0,3.75023423 C4.36265587,3.75023423 7.30476558,4.33757721 8.74499906,5.49562453 C9.78984281,6.3358587 10.0678109,7.46976612 10.4242962,9.24304594 L10.4186707,9.24398297 L20.2746068,64.0028857 C20.8401525,67.3830412 21.9607005,69.9112413 23.3896849,71.7339776 C25.0882029,73.9012526 27.3124228,75 30,75 L86.25,75 L86.25,71.25 L30,71.25 C28.892108,71.25 25.5149995,71.2788246 23.9650798,63.3386707 L22.6926577,56.2699198 L86.25,45 L90,15 L90,15 Z M83.1070303,41.8003141 L22.0286679,52.5792216 L14.5914797,11.2589084 L85.8107756,18.4326588 L83.1070303,41.8003141 L83.1070303,41.8003141 Z"></path></g>';
    }
}

class CheckCircle extends mojs.CustomShape {
    getShape() {
        return '<path d="M65.6357422,11.4318356 C60.8411822,9.34707045 55.6292681,8.3046875 50,8.3046875 C27.0675793,8.3046875 8.3046875,27.0675793 8.3046875,50 C8.3046875,72.9324205 27.0675793,91.6953125 50,91.6953125 C72.9324205,91.6953125 91.6953125,72.9324205 91.6953125,50">';
    }

    getLength() { return 218.5; }
}

class Check extends mojs.CustomShape {
    getShape() {
        return '<g><polyline points="30.8022923 48.799683 45.3869007 62.9078069 85.1630931 23.5523084"></polyline></g>';
    }

    getLength() { return 76.5; }

}

mojs.addShape( 'check', Check )
mojs.addShape( 'checkCircle', CheckCircle )
mojs.addShape( 'cart', Cart )


/* CURVES ------------------------------ */

const checkScaleCurve = 'M0, 0 C1.6508212201699894, 26.469903125906463 2.29182482977563, 50.04608270954503 5, 50 C15.506967926763606, 49.95391729045499 14.680978648439346, -34.888010576327346 25, -35 C36.581011247437885, -35.11434307737772 37.84076259289498, 25.165271161244316 46.54929577464789, 25 C57.36965213751667, 24.794650508432852 57.89757223062337, -9.641010586501078 67.53521126760563, -10 C77.59124245561436, -9.494600901839476 74.94788815090273, 5.1925068802501135 85, 5 C95.05211184909727, 4.807493119749884 91.30692525870325, 0.38723973123639255 100, 0';

const checkCurveIn = 'M0, 0 C0, 0 -1.6927880493586294, -13.761157604376649 2.142857142857143, 0 C4.666880775382781, 70.40763276328879 32.230429855715606, 109.41264911714259 67.14285714285714, 110 C84.05528442999866, 109.73020802571456 86.1844203377499, 80.38723973123638 100, 100';

var cartCurve = 'M0, 100 C12.685376377199125, 100.18418884019218 7.337549215139353, 114.95036510804754 18.478260869565215, 115 C57.04437439138431, 115.10208781556926 101.61276026876364, 56.95866830266497 100, 0';


/* ANIMATION ------------------------------ */
const COLORS = {
    '1': '#5ac2a0',
    '2': '#dddddd',
    '3': '#aaaaaa'
};

const
    CHECK_DRAW_DUR = 500,
    CHECK_DELAY = 400; //* 0.725;

const checkShowBase = new  mojs.Shape({
    fill:         'none',
    x:            { [-120]: 0, easing: 'cubic.out' },
    y:            { [-35]: 0, easing: 'cubic.out' },
    isForce3d:    true,
    parent: el
});

/* CART ------------------- */
const CART_IN = 325

var cart = new mojs.Shape({
    shape: 'cart',
    fill: COLORS[ 1 ],
    duration: CART_IN,
    opacity: { 0: 1, easing: 'circ.out' },
    parent: el,
    isShowEnd: false
}).then({
    delay: 150,
    easing: 'cubic.in',
    x: { 0: '500%' },
});

var checkCircle = new mojs.Shape({
    fill: 'none',
    strokeWidth: 4,
    stroke: COLORS[ 1 ],
    strokeDasharray: '100%',
    strokeDashoffset: { '100%' : 0 },
    strokeLinecap: 'round',
    strokeLinejoin: 'round',
    shape: 'checkCircle',
    parent: el,
    x: { [0] : 0, easing: 'cubic.out' },
    y: { [0] : 0, easing: 'cubic.out' },
    duration: 325,
});

var check = new mojs.Shape({
    fill: 'none',
    strokeWidth: 4,
    stroke: COLORS[ 1 ],
    strokeDasharray: '100%',
    strokeDashoffset: { '100%' : 0 },
    strokeLinecap: 'round',
    strokeLinejoin: 'round',
    parent: el,
    shape: 'check',
    delay: 250,
    duration: CHECK_DRAW_DUR,
    easing: 'cubic.out'
});

function envioOK() {
    checkShowBase.replay();
    //checkCircle.replay();
    //check.replay();
    cart.replay();
}